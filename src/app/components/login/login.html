<svg class="ribbons" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="var(--accent1)" />
      <stop offset="50%" stop-color="var(--accent2)" />
      <stop offset="100%" stop-color="var(--accent3)" />
    </linearGradient>
  </defs>
  <g>
    <path class="ribbon-path thick" stroke="url(#grad1)" d="M -20 70 C 10 60, 30 40, 60 50 S 120 70, 140 40" />
    <path class="ribbon-path thin" stroke="url(#grad1)" d="M -10 82 C 15 74, 45 70, 70 78 S 120 92, 130 84" />
    <path class="ribbon-path" stroke="url(#grad1)" d="M -15 38 C 15 22, 40 18, 68 30 S 115 52, 135 35" />
  </g>
  <g>
    <path class="ribbon-path" stroke="url(#grad1)" d="M -25 56 C 5 48, 40 46, 68 50 S 110 60, 135 58" />
    <path class="ribbon-path thin" stroke="url(#grad1)" d="M -30 24 C 2 16, 28 10, 62 16 S 118 26, 148 12" />
  </g>
</svg>
<div class="stars"></div>

<main class="wrap">
  <div class="logo-container">
    <a href="/home">
      <img src="assets/img/logoNetoDI.png" alt="logo-neto"
        style="height:80px; width:auto; max-width:120px; object-fit:contain;" />
    </a>
  </div>
  <section class="card" role="dialog" aria-labelledby="title">

    <h1 id="title">{{ isRegistering ? 'Registro' : 'Login' }}</h1>

    <p>
      {{ isRegistering ? 'Usa tu correo empresarial para crear una cuenta.' : 'Entra con tu cuenta empresarial de
      Tiendas Neto.' }}
    </p>

    <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
      <div class="field">
        <label for="email" style="font-size:14px;color:var(--muted)">Correo Empresarial</label>
        <input id="email" class="input" type="email" name="email" [(ngModel)]="email"
          placeholder="nombre@tiendasneto.com" required autocomplete="username" />
      </div>
      <div class="field">
        <label for="pass" style="font-size:14px;color:var(--muted)">Contraseña</label>
        <input id="password" name="password" [(ngModel)]="password" class="input" type="password"
          placeholder="Contraseña" autocomplete="current-password" required>
      </div>

      <div class="row" *ngIf="!isRegistering">
        <label class="check">
          <input type="checkbox" name="rememberMe" [(ngModel)]="rememberMe"> Recuérdame
        </label>
        <button type="button" class="link-button" (click)="forgotPassword()">
          ¿Olvidaste tu contraseña?
        </button>
      </div>

      <button class="btn" type="submit" [disabled]="!loginForm.valid">
        {{ isRegistering ? 'Registrarme' : 'Login' }}
      </button>

      <!-- <p *ngIf="!isRegistering">O inicia sesión con tu cuenta de Google:</p>
      <button *ngIf="!isRegistering" class="btn google" type="button" (click)="loginWithGoogle()">
        <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="Google logo" />
        Iniciar Sesión con Google
      </button> -->

      <div class="meta">
        {{ isRegistering ? '¿Ya tienes cuenta?' : '¿No tienes cuenta?' }}
        <button type="button" class="link-button" (click)="toggleAuthMode()">
          {{ isRegistering ? 'Inicia sesión' : 'Regístrate' }}
        </button>
      </div>

      <div *ngIf="message"
        [ngClass]="{'message-success': messageType === 'success', 'message-error': messageType === 'error'}">
        {{ message }}
      </div>

    </form>
  </section>
</main>

<script>
  // Ajusta la sutilidad del movimiento: menor = más suave
  const SPEED = 0.12; // píxeles por frame de la "corriente" del trazo
  const paths = document.querySelectorAll('.ribbon-path');
  let offset = 0;
  function tick() {
    offset -= SPEED;
    paths.forEach(p => p.style.strokeDashoffset = offset);
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
</script>